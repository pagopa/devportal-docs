# Giornale degli eventi

La funzione del Giornale degli Eventi è quella di consentire la tracciabilità di ogni operazione di pagamento attivata sulla piattaforma pagoPA.

L'operazione di pagamento si sviluppa mediante la cooperazione applicativa tra sistemi diversi degli EC, della piattaforma pagoPA e dei PSP, per ricostruire il processo complessivo è necessario che ognuno dei sistemi interessati dal pagamento telematico si doti di funzioni specifiche per registrare i passaggi principali del trattamento dell'operazione di pagamento.

Le tracce registrate dai singoli sistemi, in caso di richiesta di verifica, devono essere estratte e confrontate con le analoghe informazioni prodotte da tutti i sistemi di collaborazione coinvolti nelle operazioni interessate.&#x20;

Ai fini del confronto sono state individuate due aree di identificazione dell'operazione di pagamento:&#x20;

* l'identificazione del pagamento telematico, basata sui campi chiave che rendono univoco il riferimento al pagamento;
* l'identificazione dello scambio dei messaggi di interfaccia basata sui parametri dei messaggi stessi che collegano in modo inequivocabile tali messaggi con il pagamento specifico.&#x20;

Le operazioni inserite nel Giornale degli Eventi devono essere conservate per almeno _24 mesi_.

Nella tabella seguente sono indicate le informazioni e le specifiche di rappresentazione dei dati che tutti i soggetti sono tenuti a fornire per le verifiche di cui sopra.

| Dato                                     | Contenuto                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ---------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| dataOraEvento                            | <p>Indica la data e l’ora dell’evento secondo il formato ISO 8601, alla risoluzione del millisecondo e sempre riferito al GMT.<br>Formato [YYYY]-[MM]-[DD]T[hh]:[mm]:[ss.sss]</p>                                                                                                                                                                                                                                                                                                                         |
| identificativoDominio                    | Campo alfanumerico contenente il codice fiscale dell’EC                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| identificativoUnivocoVersamento          | Riferimento univoco assegnato al pagamento dall’EC.                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| codiceContestoPagamento                  | Codice univoco necessario a definire il contesto nel quale viene effettuato il versamento.                                                                                                                                                                                                                                                                                                                                                                                                                |
| numeroAvviso                             | Numero dell'avviso emesso dall'EC.                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| identificativoPrestatoreServiziPagamento | Identificativo del PSP univoco nel dominio scelto dall’utilizzatore finale e/o dall’EC.                                                                                                                                                                                                                                                                                                                                                                                                                   |
| tipoVersamento                           | Forma tecnica di pagamento presente nel messaggio che ha originato l’evento.                                                                                                                                                                                                                                                                                                                                                                                                                              |
| componente                               | Sistema o sottosistema che ha generato l’evento (es. FESP, WFESP).                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| categoriaEvento                          | INTERNO/INTERFACCIA, indica se l'evento tracciato è relativo un'operazione di interfaccia con altri sistemi oppure se rappresenta un'operazione interna (es. cambio di stato) al proprio sistema.                                                                                                                                                                                                                                                                                                        |
| tipoEvento                               | Identificativo del tipo di evento. Nel caso di interazioni SOAP è il nome del metodo SOAP.                                                                                                                                                                                                                                                                                                                                                                                                               |
| sottoTipoEvento                          | Nel caso di interazioni SOAP sincrone assume i valori REQ/RESP per indicare rispettivamente SOAP Request e SOAP Response.                                                                                                                                                                                                                                                                                                                                                                                 |
| identificativoFruitore                   | <p>Nel caso di eventi di tipo INTERFACCIA si deve utilizzare l’identificativo del sistema del soggetto richiedente nell’ambito del dominio<br>(Es. NodoDeiPagamentiSPC nel caso della paGetPayment).<br>Nel caso di eventi di tipo INTERNO, si può utilizzare un nome di componente o sotto componente che genera l’evento.</p>                                                                                                                                                                          |
| identificativoErogatore                  | <p>Nel caso di eventi di tipo INTERFACCIA si deve utilizzare l’identificativo del sistema del soggetto rispondente nell’ambito del dominio<br>(Es. identificativoStazioneIntermediarioPA nel caso della paGetPayment).<br>Nel caso di eventi di tipo INTERNO, si può utilizzare un nome di componente o sotto componente che processa l’evento. Per quest’ultima tipologia il valore può coincidere con l’identificativoFruitore, qualora non vi sia un componente che risponde all’ evento stesso.</p> |
| identificativoStazioneIntermediarioPA    | Identificativo della Stazione dell’intermediario dell’EC nel sistema della piattaforma pagoPA, da cui sono transitati payment e receipt.                                                                                                                                                                                                                                                                                                                                                                  |
| canalePagamento                          | Identificativo del Canale del PSP nel sistema della piattaforma pagoPA da cui sono transitati payment e receipt.                                                                                                                                                                                                                                                                                                                                                                                          |
| parametriSpecificiInterfaccia            | Parametri specifici utilizzati nell’interfaccia dal PSP o dall’EC.                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| esito                                    | <p>Campo opzionale in base allo stato dell’operazione al momento della registrazione dell’evento.<br>Obbligatorio nel caso di richieste SOAP.</p>                                                                                                                                                                                                                                                                                                                                                         |
