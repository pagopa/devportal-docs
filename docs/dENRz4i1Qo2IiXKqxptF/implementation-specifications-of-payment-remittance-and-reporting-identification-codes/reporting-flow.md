# Reporting Flow

In order to enable the Creditors to reconcile the reversals that have occurred (ref.[reconciliation-of-remittance-flow.md](reconciliation-of-remittance-flow.md "mention")), the PSP that performed the transaction shall send to the Payment Node-SPC a reporting flow (RF) prepared in accordance with the scheme shown in Table 6. 

This flow must be sent by, and no later than, midnight of the second business day following the receipt of the payment order (D+2).

The columns _Lev_, _Type_, _Occ_ and _Len_ of the above mentioned Table 6 take on the following meaning:

#### Table 5 - **Reporting flow -** Column description

<table><thead><tr><th width="155.1992874973217">column</th><th width="572.9414632585621">description</th></tr></thead><tbody><tr><td><em>Lev.</em></td><td>indicates the level of indentation of the data in order to make evident the structures that contain additional information (&quot;Gen&quot; column equals <em>s</em>): e.g., level 1 structures are formed by all data above level 1, level 2 structures are formed by all data above level 2, and so on.</td></tr><tr><td><em>Type</em></td><td><p>indicates the type of the data to be used; it can take the following values:</p><ul><li>s - structure, which can contain other structures or data,</li><li>an - alphanumeric data</li><li>n - numeric data.</li></ul></td></tr><tr><td><em>Occ</em></td><td>indicates the &quot;occurrences&quot; of the data in the format <strong>min..max.</strong></td></tr><tr><td><em>Len</em></td><td>indicates the maximum length of the data item in the format <strong>min..max;</strong> in the case of a fixed length only the data item <em>len</em>will appear, in the case of fixed lengths alternatively the notation will be <em>len1 / len2.</em></td></tr></tbody></table>

**Table 6 - Reporting flow - Data Scheme**

<table><thead><tr><th width="206">Datum</th><th width="150">Lev.</th><th width="150">Type</th><th width="150">Occ</th><th width="181">Len</th><th>Content</th></tr></thead><tbody><tr><td>Objectversion</td><td>1</td><td>an</td><td>1..1</td><td>1..16</td><td><p>Version that identifies the object exchanged.</p><p>Allowed values: <strong>&ldquo;1.0&rdquo; and &ldquo;1.1&rdquo;</strong></p></td></tr><tr><td>Flowidentifier</td><td>1</td><td>an</td><td>1..1</td><td>1..35</td><td><p>Identifier associated with the generation and transmission of the remittance flow.</p><p>Must be univocal within the reference year of the payment transactions to which the flow refers.</p></td></tr><tr><td>dateTimeFlow</td><td>1</td><td>an</td><td>1..1</td><td>19</td><td><p>It indicates the date and time of creation of the flow, according to ISO 8601 format</p><p><strong>[YYYY]-[MM]-[DD]T[hh]:[mm]:[ss]</strong></p></td></tr><tr><td>SettlementUnivocalidentifier</td><td>1</td><td>an</td><td>1..1</td><td>1..35</td><td>Reference assigned by the PSP to the funds transfer transaction by which the remittance of the collected amounts or the accumulation of the credits made by customers is settled in accounting terms.</td></tr><tr><td>Settlementdate</td><td>3</td><td>an</td><td>o</td><td>10</td><td>Indicates the execution date of the funds transfer transaction by which the remittance of the collected amounts is settled in the accounts, in the format ISO 8601 [YYYY]-[MM]-[DD].</td></tr><tr><td>SenderInstitution</td><td>1</td><td>s</td><td>1..1</td><td></td><td>Aggregation related to the sender PSP that generates this flow.</td></tr><tr><td>UnivocalidentifierSender</td><td>2</td><td>s</td><td>1..1</td><td></td><td>Aggregation reporting information concerning the identification of the sender institution of the flow.</td></tr><tr><td>UnivocalIdentifiertype</td><td>3</td><td>an</td><td>1..1</td><td>1</td><td><p>Alphanumeric field describing the coding used to identify the Sender Institution; if present, it can take the following values:</p><ul><li><strong>&lsquo;G&rsquo;</strong> = legal person</li><li><strong>&lsquo;A&rsquo;</strong> = ABI code</li><li><strong>&lsquo;B&rsquo;</strong> = BIC code (ISO 9362 standard)</li></ul></td></tr><tr><td>UnivocalIdentifiercode</td><td>3</td><td>an</td><td>1..1</td><td>1..35</td><td>Alphanumeric field that can contain the fiscal code or VAT no., ABI code or BIC code of the sender PSP, depending on the given Univocalidentifiertype.</td></tr><tr><td>Sendername</td><td>2</td><td>an</td><td>0..1</td><td>1..70</td><td>Contains the name of the sender PSP generating the flow.</td></tr><tr><td>RemittingBankBICcode</td><td>2</td><td>an</td><td>0..1</td><td>1..35</td><td>Contains the BIC code of the PSP that generated the SEPA Credit Transfer remittance. Corresponds to the AT-09 data element of the SCT.</td></tr><tr><td>Receiverinstitution</td><td>1</td><td>s</td><td>1..1</td><td></td><td>Aggregation relating to the recipient Creditor of the flow.</td></tr><tr><td>ReceiverUnivocalIdentifier</td><td>2</td><td>s</td><td>1..1</td><td></td><td>Aggregation reporting information concerning the fiscal identification of the Creditor receiving the flow.</td></tr><tr><td>UnivocalIdentifiertype</td><td>3</td><td>an</td><td>1..1</td><td>1</td><td>Alphanumeric field indicating the nature of the Creditor; if present it must take the value <strong>&lsquo;G&rsquo;</strong>, Legal Person Tax Identifier. .</td></tr><tr><td>UnivocalIdentifiercode</td><td>3</td><td>an</td><td>1..1</td><td>1..35</td><td>Alphanumeric field containing the fiscal code of the flow recipient Creditor.</td></tr><tr><td>Receivername</td><td>2</td><td>an</td><td>0..1</td><td>1..70</td><td>Contains the name of the Creditor that receives the flow.</td></tr><tr><td>TotalNumberPayments</td><td>1</td><td>n</td><td>1..1</td><td>1..15</td><td>Number of payments present in the flow.</td></tr><tr><td>TotalAmountPayments</td><td>1</td><td>n</td><td>1..1</td><td>1..18</td><td><p>Total amount of payments present in the flow. Must coincide with the sum of the singleAmountPaid data present in the flow.</p><p><strong>It must be greater than 0.</strong></p></td></tr><tr><td>SinglePaymentsdata</td><td>1</td><td>s</td><td>1 n</td><td></td><td>Aggregation with a number of occurrences equal to the element TotalNumberPayments.</td></tr><tr><td>PaymentUnivocalIdentifier</td><td>2</td><td>an</td><td>1..1</td><td>1..35</td><td>Returns the IUV code value to which the payment reported in the flow refers.</td></tr><tr><td>CollectionUnivocalIdentifier</td><td>2</td><td>an</td><td>1..1</td><td>1..35</td><td>Univocal transaction reference, it is represented by the <em>payment token</em>.</td></tr><tr><td>SinglePaymentDataindex</td><td>2</td><td>n</td><td>0..1</td><td>1</td><td>Index of the occurrence of the payment within the transfer structure <em>,</em> <em>Transferid</em>field .</td></tr><tr><td>singleAmountPaid</td><td>2</td><td>an</td><td>1..1</td><td>3..12</td><td><p>Numeric field indicating the amount paid or revoked. It must be different from 0.</p><p>Where the single amount paid refers to a revoked payment (given codeSinglePaymentEvent =3) it must take a negative value.</p></td></tr><tr><td>SinglePaymentOutcomecode</td><td>2</td><td>n</td><td>1..1</td><td>1</td><td><p>Numeric field indicating the outcome of the payment. It can have the following values:</p><ul><li><strong>0</strong> = Payment made</li><li><strong>3</strong> = Payment revoked</li><li><strong>4</strong> = Payment managed in Stand In</li><li><strong>8</strong> = Payment made without &quot;Telematic Receipt&quot; acknowledgment for the PSP and handled in Stand In.</li><li><strong>9</strong> = Payment made without &quot;Telematic Receipt&quot; acknowledgment for the PSP</li></ul></td></tr><tr><td>SinglePaymentOutcomedate</td><td>2</td><td>an</td><td>1..1</td><td>10</td><td>Indicates the date on which the payment was ordered or revoked, in the format ISO 8601 [YYYY]-[MM]-[DD].</td></tr></tbody></table>

As far as the Creditors are concerned, these homogeneous data flows are made available to them through the infrastructure referred to in Article 5, paragraph 2 of the CAD to which the PSPs making the remittance are required to connect, in the manner set out in the SANPs (Annex B to the Guidelines).

The XML schema (XSD) describing the content of the XML files used to transfer the information of the reporting flow is provided in electronic format in the GitHub pagopa-api repository ([https://github.com/pagopa/pagopa-api/blob/master/general/FlussoRiversamento_1_0_4.xsd](https://github.com/pagopa/pagopa-api/blob/master/general/FlussoRiversamento_1_0_4.xsd)).

Finally, it should be noted that since the reporting flow is associated with a single remittance SCT, said flow is obviously always related to a single IBAN crediting code.

The preparation of more than one RF with the same _identifierFlow_ is an exceptional event, which can be motivated by errors present in the previous flow, such an operation must be managed in the manner described in the section _"Management of overwriting Reporting Flowse"_ present in the SANPs.

## Clarifications on the "content" column of **Table 6 - Reporting Flow - Data Template.**

Bearing in mind that the meaning of the data required for the reporting flow is given in the "content" column of Table 6, some clarifications useful to Creditors on the data in the reporting flow are provided below:

* **Flowidentifier:** must be the same as the one reported in the **<**Flowidentifier**>** component of the SEPA Remittance Credit Transfer description (“_Remittance Information_” - attribute AT-05, [fund-transfer-operation.md](fund-transfer-operation.md "mention"));
* **SettlementUnivocalidentifier** _Transaction Reference Number (TRN) AT-43 Originator Bank’s Reference_ of the SEPA Remittance Credit Transfer;
* **CollectionUnivocalIdentifier:** represents the identifier by which the PSP identifies the individual transaction, it is contained within the _receipt_ element _receiptId_;
* **SinglePaymentDataindex:** optional data element representing the i-th occurrence of payment within the reported _receipt_;

## Standardization of the FlowIdentifier element.

In order to standardize the way of composition of the _FlowIdentifier_ element present in the standardized description of the SEPA Credit Transfer and also in the reporting flow, the following structure is adopted:

**\<settlement date>\<sender institution>"-"\<flow>.**

where the above components take on the following meaning:

* **\<settlement date>** contains the same information as the _Settlementdate_ element of the XML file;
* **\<sender institution>** contains the identification code within the platform of the PSP preparing the flow; 
* **"-"** fixed data;
* **\<flow>** alphanumeric string that, together with the above information, allows the flow itself to be uniquely identified. The characters allowed within the string are: digits 0 to 9, upper and lower case letters of the Latin alphabet, and the characters in Table 7.

#### Table 7 - Allowed characters

<table data-header-hidden><thead><tr><th width="150"></th><th width="150"></th><th width="150"></th><th></th></tr></thead><tbody><tr><td></td><td><strong>ASCII</strong></td><td><strong>Symbol</strong></td><td><strong>Name</strong></td></tr><tr><td><strong>Dec</strong> | <strong>Hex</strong></td><td></td><td></td><td></td></tr><tr><td>45</td><td>2D</td><td>-</td><td>minus sign - hyphen</td></tr><tr><td>95</td><td>5F</td><td>_</td><td>underscore</td></tr></tbody></table>

Examples: 

**2015-07-15xxxxxxxx-0000000001**

**2015-07-15xxxxxxxx-hh_mm_ss_nnn**